const books = {
  1: {
    cover: "bc1.png",
    chapters: {
      "Chapter 1": `Once upon a time, there was a kitten. Her name was Minanu. Minanu was not very smart, but she liked chasing the string. Her owner played with her every day. Minanu was living an amazing life.  

One day, the owner said "Minanu, come here!". Minanu didn't really know her name, but when the owner shook a bag with kitty treats, Minanu knew exactly what to do. She sprinted through the kitchen and the living room, right to the hallway, where her owner was waiting. "That's a good kitty", he says as he pets the kitty.  

Little did he know, Minanu had an Evil mood. Evil kitty bit her owner's fingers. "That's an evil kitty" said the owner. But Minanu didn't care, she understood only very little from the human language.  

There was also another person standing in the hallway. Minanu went to see if this one doesn't have some more kitty treats. But if she knew what was going to happen next, she would have never taken these steps.  

This person grabbed Minanu. "Put me down!" screamed Minanu. She just cleaned her fur and now this human touched her with his dirty hands. "Put me down, I'm telling you!". The person didn't mind Minanu's screaming. He held her even tighter and forced her into a box. Minanu loved boxes.  

"Boxes are sauce," thought Minanu. "But this one, this one is not sauce." The box was actually a plastic carrier. Minanu heard the sound of the door opening and closing.  

They got into a car, and Minanu was leaving her home, maybe forever, going to an unknown place, betrayed by her beloved owner. She was horrified. "Not even a pillow!? That's the worst thing that could happen to me today! Just wait when I get out, I will hiss on you and then I won't eat anything to show you I am mad!".  

Truly, a horrific experience.`,
      "Chapter 2": `The car (actual car, not a kitty) was going for a long time. Minanu got bored and wanted her string. So she started meowing.  

The man said, "Keep quiet, I can't let you out because you would destroy my car".  
Minanu stopped meowing. "Car? Am I in a car??" (she didn't know until now).  
Minanu hated being in a car, that's why she learned this one human word. When her previous owner said "car" Minanu would always hide under the bed.  

"But I don't like cars" finally realized Minanu.  
She started screaming very loudly. Safe to say, the man was not very happy. Minanu wanted to get out of the car because cars are scary.  

Finally, the car stopped. Minanu couldn't believe she was still alive after such a traumatic experience. The man took the carrier out of the car. Now, when Minanu was not in any cars, she got happy again.  

Minanu is a cat, and cats do not have many ways to express happiness, especially when closed in a box.  
So she decided to start meowing again, but this time those were happy meows.  

The man, however, did in fact not appreciate this amount of happiness and started shouting at Minanu.  
Minanu closed her mouth, just to make sure he was not saying the word "car".  

Here in the box, she had no beds to hide under. She started thinking about what she would do in such a situation. Meanwhile, the man carried her to his house. He put the box on a table and left.
`,
      "Chapter 3": `Minanu was now alone. She didn't like being alone.  

"I don't like this" she said. But nobody could hear her.  
Suddenly, the door opened. The man came back. He was carrying a rope and a string. He opened the box and let Minanu out.  

Minanu saw the string in his hands. "Yayy I like strings! Give me Give me!" she exclaimed.  
But the man did not want to play. He tied the string around Minanu's neck and connected it to the rope.  
Then he took the kitty and went outside. There he tied the rope in a small cage. Not even enough for Minanu to fully stretch her legs.  

Minanu started living a strange life. She didn't understand much, but she knew she didn't like the situation. At first, the man fed her 2 times a day, a pretty good amount of food.  
He was letting her out of the cage (but only with his supervision and still with the string around her neck) and once he played with her and a stick. She always had access to water.  

However, as days went by, the man visited Minanu less and less. She saw him walking by, but he stopped only very rarely.  
Even though she still got fed twice a day, the portions were too small for a kitty like Minanu.  
She could not go out of the cage anymore, and sometimes she would be left without water for long hours.`
,
      "Chapter 4": `After 2 weeks or so, the condition worsened even more. The man would go to Minanu once a day, if even.  
Minanu was in horrible condition and the lack of food and water made her little body very weak.  

But one day, the man left a bag full of food in her cage. Then he left the house in a car, full of his belongings, as he was leaving forever.  
Anyway, Minanu didn't know that, and she thought better days were coming. She ate a lot of the food and felt much better.  

In the past days, she was so weak she couldn't even walk.  
Now she got up and thought: "Wait, why am I still here? I can just go through the bars". What a realization.  
Indeed, Minanu was skinny enough to get out of the cage through the bars. But now she played it safe.  

She didn't leave the house immediately, but she stayed for a few days to get her strength back. What a smart kitty.  
Then, when the food was gone, she was wondering, "Now what?" But she noticed another bag of food in the house.  

"Wiwiwiwiwi" said Minanu happily and stayed for another few days.  
When all the food was actually gone, Minanu left the house. She walked a long long way (about 100 m) and she found a paper box.  

"Yeppiii!" Minanu was happy, she liked boxes a lot. She jumped in the box and slowly fell asleep.  
When she woke up, it was already dark night. Minanu didn't like darkness and black things.  
So she decided to eep again, till the morning, when everything is better, bright and white.

`,
      "Chapter 5": `In the morning, she noticed a nearby forest. She didn't want to leave her box behind, but she was getting hungry again.  
"Time to get food" decided she and bravely went right into the forest.  

Not long after, she noticed a deer. She knew she must be quick because these deer never stay too long in one place.  
So she waited about 3 minanus and when the deer was walking near her hiding spot, she jumped into action.  

She landed right in front of the deer, scaring him a little.  
"Oh, what are you doing here, little kitten?" asked the deer, when he saw it's a kitty what scared him.  

"Hello dear deer, I'm just a little kitten. I was taken away from my owner by force when he sold me to a cruel man.  
I was kept in a small cage for weeks, sometimes going days without food or water. Could you please tell me, kind sir, which way is the nearest town?"  

"Well, if it's how you say, I think it would be best if you stayed away from people. Aren't you afraid of them, after such trauma?" asked the deer.  
"No" answered Minanu. Her little brain was not able to hold hate for too long, except hate for cars and also boxes without pillows.  

"Okay then, you do you. Even the nearest town is still quite far. I will take you closer, if you wish."  
"Thank you sir, your kindness is very appreciated".  

And the deer took kitten on his back, and together they went a long way to the nearest city.  
In the city, Minanu found a pet shelter. She knew from the kitty news, that here they will take care of her well. And they did.
`,
      "Chapter 6": `Just 3 days later, an older lady visited the shelter. She had lost her cat a week ago.  
This cat was very old, and the woman knew she had an amazing life.  

She was checking each kitty enclosure. When she got to Minanu, she looked through the glass. Minanu looked at her too. She looked like a kind person.  
Minanu wanted to meet her and to stay with her.  

The woman liked Minanu and Minanu liked her. When she asked the staff to open the enclosure, Minanu was very happy.  
Now she got to see this person closer. "Oh, and I must purr a lot!" remembered our kitty "Humans love when I purr".  
That's what she learned in the kitty school, when she was very young.  

And so she started purring very loudly, as loudly as she could.  
"I will take this one please" decided the woman.  

The staff said they are busy at the moment and told her to wait in the waiting room with Minanu, and then they would get the paperwork done.  
In the waiting room, Minanu played with her new owner. She showed her that it won't be too easy to take care of such a kitten.  

The second they sat together on the chair, Minanu grabbed the woman's hijab in her mouth and wanted to run around the room, like if she had a flag.  
The woman laughed and stopped the mischievous kitty.  

When they got home, Minanu knew that this is not just a normal home.  
This is an awesomesauce home! And so she lived with her kind owner for many many years
`,
      "End": `10.2.2025

Written for: Ali

By: Shark

Main helper: Minonka

Second helper: Angela

Thanks for reading!

Story is not based on real life events.`
    }
  },
  2: {
    title: "The Brave Wiwiwi",
    chapters: {
      "A Wiwiwi": `What is a Wiwiwi, you may ask? Well, a Wiwiwi is a kitten, no, rather a big kitty, and she is very cute. She likes to eep and eat, but sometimes she likes to run very fast across the room.

      But today, she did not feel like running. She was waiting by the door, waiting for her owner to return from school. Not like she missed her owner much, but sometimes she brought some treats, and Wiwiwi always liked kitty treats, especially the kitty treats for good kittiez. 

      She waited and waited, for a long long time (like 9 or 10 minanus) and then she fell asleep. Wiwiwi liked to eep in a circle, like a donut. But sometimes she would stretch all of her paws and her whole body. She also liked to lay on her back, and when the owner touched her belly, she would bite her hand. As Wiwiwi was eeping, it started getting late. Little did Wiwiwi know, that her owner is not coming home. 
      `,
      "Eepy kitty": `Her owner was spending the night in her friends house. Wiwiwi woke up at 8.06 pm and became very sad, because her owner was not coming. "But.. but, but what am I going to eat?" asked Wiwiwi. Maybe she shouldn't have eaten all the food her owner left there in the morning (twice the usual portion). But Wiwiwi didn't know it was also for the evening, and thought that her owner just didn't notice the amount. 

The house was dark and quiet. Wiwiwi tried to meow veryyy loudly, to call her owner. Then she knocked down some stuff from the table, because she knew it always gets everybody's attention. As we could expect, it did not work this time, but Wiwiwi was proud of her work. "And now we wait" said Wiwiwi and sat near the table. 

After more time (12 minanus) she got bored of waiting and decided to eep more.  As she was closing her eyes, she heard a loud sound. But Wiwiwi didn't care and ept. `,
      "In the attic": `Meanwhile, something was happening in the attic. This place was one of the scariest places in the whole house. Very dark and dirty. Nobody really cleaned it since years. There was one small window but the mechanism was broken and it stayed opened,  just covered by some cloth. 

The place was usually silent, but not today. Something was happening. Suddenly, the cloth started moving even though it was not windy. A small dark shade went through the window and hid behind near box of old clothes. After about 7 minanus,  the shade moved to the left,  right into a shelf with rusty bowls and pots. One of the pots fell down and made a very loud noise. The shade got scared and quickly hid under the shelf. 

Then it got a little braver and continued to explore the attic, until it got to the exit door. The door were surprisingly opened, even though they are usually locked. Somebody must have forgotten to do it. Little shade went to the hallway. It found something on the floor - Wiwiwi's food and water bowls. It quickly drank most of the water and ate all of the food Wiwiwi left (but that was only very little). Then it hid behind a huge flower pot that was standing there because Wiwiwi was coming to check, if there isn't any more food. She saw her empty bowl, but then suddenly, she smelled a stranger. She went all alert, with her fur fluffed up so she appeared bigger. She looked around the room and tried to find the intruder. 

Finally, she noticed a something dark and small behind the flower pot. She started hissing and growling veryy loudly so the shade would know she isn't afraid to fight.

The shade came a little closer. Wiwiwi didn't like strangers, she was ready to show who is the brave kitty here. As she was preparing to jump, the shade made a very silent noise: 

"Maaw?" `,
      "Who is it?": `It was a little kitten. Must have been just a few weeks old. She was very fluffy and she had big green eyes. Wiwiwi sat near her. "Mauw?" said the kitten again. She sounded very scared. Then she laid down on the floor and on her back, so Wiwiwi would know she is not dangerous. Wiwiwi asked "Mnauw? Mnmnm wiwi mMauuuu?" 

Kitten explained, that she got lost from her home and her kitty mom. Wiwiwi knew she must help the kitten return home. 

Wiwiwi first very thoroughly cleaned the kittens dirty fur. When she looked as good as new, Wiwiwi showed off her skills. She knew how to open the fridge. After a few tries, the door successfully opened. Wiwiwi found a bag of kitty food in plastic packages so it was easy to tear. The kitten ate a lot and then she was so very eepy and she ept. Wiwiwi ept too, right next to kitten so she would keep her warm. 

In the morning, before Wiwiwi's owner returned, they went on a little adventure. They both went through the window and to the streets. The kitten didn't really know in which house her family lived, because her small brain was not capable of remembering that yet, but she knew the family had a big purple car, because she always looked at it from the window. 

Wiwiwi has been outside by herself only once in her life, when she escaped because she wanted to chase birds (she was outisde 4 minanus, before her owner got her), but she often went in the garden (on a leash). 

The kittiez walked and walked, and after 15 meters they found the big purple car. Wiwiwi meowed loudly and scratched on the door until someone came to open them. The person saw Wiwiwi and also the little kitty. "Oh hi! I don't know who you are, big kitty, but I certainly know Minu! Hi Minu, where have you been?" and he reached for Minu. He brought her inside and Wiwiwi got a big reward - a full bag of kitty treats, best quality! Minu's mother was very happy to see her again and Minu reunited with her siblings. Wiwiwi wanted to play with all of them, but she had to go home, her owner will return soon. She said bye to Minu and left. `,
      "The box": `After a few weeks, Wiwiwi was again waiting for her owner to come from school. And again, it was taking longer than usual. Finally, Wiwiwi heard sound of keys in the lock. Her owner went through the door and she was carrying a big box. "Haiii Wiwiwi," she said. "Look what I got you!" and she opened the box. It was Minu! Wiwiwi got so happy, she missed the kitten. "Maaaawww" exclaimed she, all excited. The owner got Minu from her neighbors for free, because Minu refused to leave with anyone. She must have smelled Wiwiwi from the owners clothes and she went happily inside the box. 

So now Wiwiwi had a friend. They played often, ate together and ept together and they lived happily ever after. `,
      "End": `25. 3. 2025

      By: Shark

      For: Ali 

      Wiwiwi??

      Mrnauu`
    }
  },
  3: {
    title: "A freaky story",
    chapters: {
      "Freaky story": `
      ‎

      Oh hello, my dear friend

I hope you will make it to the end

of this book, book of fred the freaky

but it might get, mhhh... ...quite naughtyyyyy 

      ‎ 

      I'll tell you a story, is it for what you came?

if it gets naughty, I'm not the one to blame.

I will tell you a story, story of a freak

now sit quietly, and let me speak.

      ‎

      Once upon a time, that's how most stories start

Now let's get to the naughty part,

Once upon a time, I went to the city, 

and I knew it might get freaky... 

‎ 

I walked down the street, and, 

what is it dear friend? 

are you scared, already? 

Don't you like the freaky stories, have you ever heard any? 

‎ 

Sit back down, right next to me

I will tell you the story, carefully 

I will make sure you don't get scared

And you wont forget what I shared. 

‎ 

As I walk down the street

I see a kitten, trying to eep

It was summer, during those times

the ground was hot, burned kitty paws 

‎ 

So I took the kitty, and in a little time

she was a good friend of mine

A little kitten, she used to purr

when I petted her fluffy fur. 

‎ 

But after a while, kitten left

I exclaimed "no!" and after her I went

I wanted her back, she was very fluffy

and when I see fluff, I get quite naughty... 

‎ 

I was unsuccessful, sadly

At first, I missed kitty badly

however, later I got the news

From aunt Muriel, and her husband Eustace 

‎ 

She sent me a letter, how sweet

Letter said to come, and bring a doggy treat

A treat for the doggy dog they got

it might get freaky, maybe a lot 

‎ 

I sat in the bus, all excited

Finally, I will have some fur to pet

Maybe, just maybe, when i see the doggy

I might get quite... quite naughtyy... 

‎ 

I sat in the living room, and here he is!

A doggy dear. How much did i miss,

the furry fur, oh... i must say

I have been naughtyyy 

‎ 

Alone with Courage I was left

And his fluffy fur I didnt take, yet

But I had to do the shameful thing

Doggy tried to hide in the sink. 

‎ 

Courage, my friend

Let's get this book to the end.

I will take the fur, all the fluff

And then I will go, and bring my stuff 

‎ 

I shaved the dog's fur. What a shame.

But I must've proven my name

I am indeed, Fred the Freaky,

And fur makes me.. naughtyyyy... 

‎ 
With love,

Fred`
    }
  }
};

const bookSelection = document.getElementById("book-selection");
const bookReader = document.getElementById("book-reader");
const bookContainer = document.getElementById("book");
const prevBtn = document.getElementById("prevPage");
const nextBtn = document.getElementById("nextPage");
const backBtn = document.getElementById("backToSelection");

let currentPage = 0;
let pages = [];

document.querySelectorAll(".book-thumbnail").forEach((thumbnail) => {
  thumbnail.addEventListener("click", () => {
    const bookId = thumbnail.getAttribute("data-book");
    loadBook(bookId);
  });
});

function loadBook(bookId) {
  const book = books[bookId];
  pages = [];

  // Cover Page
pages.push(`
  <div class='cover'>
    <img src="${book.cover}" alt="${book.title} Cover" class="cover-image" />
  </div>
`);


  // TOC Page
  let tocHtml = "<div class='toc'><h3>Table of Contents</h3>";
  Object.keys(book.chapters).forEach((chapter, index) => {
    tocHtml += `<a onclick="goToChapter(${index + 2})">${chapter}</a>`;
  });
  tocHtml += "</div>";
  pages.push(tocHtml);

Object.entries(book.chapters).forEach(([title, text]) => {
  // Ensure paragraphs are correctly formatted
  let formattedText = text.replace(/\n/g, '</p><p>'); // Converts newlines into paragraph tags
  pages.push(`<h2>${title}</h2><p>${formattedText}</p>`);
});

  renderPages();
  bookSelection.style.display = "none";
  bookReader.style.display = "block";
}

function renderPages() {
  bookContainer.innerHTML = pages
    .map((content, i) => `<div class='page${i === 0 ? " show" : ""}' id='page-${i}'>${content}</div>`)
    .join("");
  currentPage = 0;
}

function showPage(index) {
  if (index >= 0 && index < pages.length) {
    document.querySelectorAll(".page").forEach((p) => p.classList.remove("show"));
    document.getElementById(`page-${index}`).classList.add("show");
    currentPage = index;
  }
}

function goToChapter(index) {
  showPage(index);
}

prevBtn.onclick = () => {
  if (currentPage > 0) showPage(currentPage - 1);
};

nextBtn.onclick = () => {
  if (currentPage < pages.length - 1) showPage(currentPage + 1);
};

backBtn.onclick = () => {
  bookReader.style.display = "none";
  bookSelection.style.display = "flex";
  bookContainer.innerHTML = "";
};
